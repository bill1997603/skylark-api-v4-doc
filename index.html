
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
            <a href="#wechat-client" class="toc-h1 toc-link" data-title="Wechat Client">Wechat Client</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#access_token" class="toc-h2 toc-link" data-title="access_token">access_token</a>
                  </li>
                  <li>
                    <a href="#jsapi_ticket" class="toc-h2 toc-link" data-title="jsapi_ticket">jsapi_ticket</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#pushes" class="toc-h1 toc-link" data-title="Pushes">Pushes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#14a8535075" class="toc-h2 toc-link" data-title="微信推送">微信推送</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#flows" class="toc-h1 toc-link" data-title="Flows">Flows</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#155570b4f1" class="toc-h2 toc-link" data-title="创建组织流程">创建组织流程</a>
                  </li>
                  <li>
                    <a href="#abb5975e52" class="toc-h2 toc-link" data-title="获取发起的流程列表">获取发起的流程列表</a>
                  </li>
                  <li>
                    <a href="#moment" class="toc-h2 toc-link" data-title="获取某条流程的所有Moment">获取某条流程的所有Moment</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#c874682816" class="toc-h2 toc-link" data-title="查询当前空间下所有用户">查询当前空间下所有用户</a>
                  </li>
                  <li>
                    <a href="#6d47866b22" class="toc-h2 toc-link" data-title="所在组织">所在组织</a>
                  </li>
                  <li>
                    <a href="#b6bb36669d" class="toc-h2 toc-link" data-title="查询用户信息">查询用户信息</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#organizations" class="toc-h1 toc-link" data-title="Organizations">Organizations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#cb9cf88fe7" class="toc-h2 toc-link" data-title="所有组织">所有组织</a>
                  </li>
                  <li>
                    <a href="#c8c51b76c7" class="toc-h2 toc-link" data-title="顶级组织">顶级组织</a>
                  </li>
                  <li>
                    <a href="#cda11de7f2" class="toc-h2 toc-link" data-title="子代组织">子代组织</a>
                  </li>
                  <li>
                    <a href="#02e4569f06" class="toc-h2 toc-link" data-title="组织成员">组织成员</a>
                  </li>
                  <li>
                    <a href="#92cfa6d383" class="toc-h2 toc-link" data-title="创建组织">创建组织</a>
                  </li>
                  <li>
                    <a href="#66dd10a168" class="toc-h2 toc-link" data-title="创建组织成员">创建组织成员</a>
                  </li>
                  <li>
                    <a href="#29d823bb6d" class="toc-h2 toc-link" data-title="修改组织信息">修改组织信息</a>
                  </li>
                  <li>
                    <a href="#59985a21a4" class="toc-h2 toc-link" data-title="删除组织">删除组织</a>
                  </li>
                  <li>
                    <a href="#3e58460320" class="toc-h2 toc-link" data-title="修改组织成员信息">修改组织成员信息</a>
                  </li>
                  <li>
                    <a href="#874a00b2ee" class="toc-h2 toc-link" data-title="增加组织人员">增加组织人员</a>
                  </li>
                  <li>
                    <a href="#e10718abdb" class="toc-h2 toc-link" data-title="移除组织成员">移除组织成员</a>
                  </li>
                  <li>
                    <a href="#cb023d1f3e" class="toc-h2 toc-link" data-title="增加组织管理员">增加组织管理员</a>
                  </li>
                  <li>
                    <a href="#1f3fcec323" class="toc-h2 toc-link" data-title="删除组织管理员">删除组织管理员</a>
                  </li>
                  <li>
                    <a href="#02b8482275" class="toc-h2 toc-link" data-title="修改组织管理员权限">修改组织管理员权限</a>
                  </li>
                  <li>
                    <a href="#5c224df13c" class="toc-h2 toc-link" data-title="查询当前组织管理员">查询当前组织管理员</a>
                  </li>
                  <li>
                    <a href="#0e028a78c9" class="toc-h2 toc-link" data-title="查询当前组织创建者">查询当前组织创建者</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#forms" class="toc-h1 toc-link" data-title="Forms">Forms</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1de85d87d5" class="toc-h2 toc-link" data-title="表单信息">表单信息</a>
                  </li>
                  <li>
                    <a href="#52dced31b8" class="toc-h2 toc-link" data-title="表单数据">表单数据</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#attachments" class="toc-h1 toc-link" data-title="Attachments">Attachments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#711363c424" class="toc-h2 toc-link" data-title="查询">查询</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#accesses" class="toc-h1 toc-link" data-title="Accesses">Accesses</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#3389c548ae" class="toc-h2 toc-link" data-title="获取当前空间下所有权限">获取当前空间下所有权限</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#settings" class="toc-h1 toc-link" data-title="Settings">Settings</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#95c0eddacd" class="toc-h2 toc-link" data-title="批量删除不在任何组织中的成员">批量删除不在任何组织中的成员</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#column-explanation" class="toc-h1 toc-link" data-title="Column Explanation">Column Explanation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#7dbb085c42" class="toc-h2 toc-link" data-title="数据库表解释">数据库表解释</a>
                  </li>
                  <li>
                    <a href="#41e10bfd0d" class="toc-h2 toc-link" data-title="字段解释">字段解释</a>
                  </li>
                  <li>
                    <a href="#2574b30335" class="toc-h2 toc-link" data-title="流程状态解释">流程状态解释</a>
                  </li>
                  <li>
                    <a href="#response-cached_values" class="toc-h2 toc-link" data-title="Response cached_values 说明">Response cached_values 说明</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tags" class="toc-h1 toc-link" data-title="Tags">Tags</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#61fbf3a18b" class="toc-h2 toc-link" data-title="查询空间下标签类型">查询空间下标签类型</a>
                  </li>
                  <li>
                    <a href="#4ba44bc588" class="toc-h2 toc-link" data-title="查询成员标签下的成员">查询成员标签下的成员</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Skylark API!</p>

<p>域名：</p>

<ul>
<li>测试：https://beta.skylarkly.com</li>
<li>正式：https://skylarkly.com</li>
</ul>

<p><strong>注</strong>：</p>

<ul>
<li>所有的开发对接工作在Beta https://beta.skylarkly.com 上完成，部署时会给线上环境的配置</li>
</ul>
<h1 id='authentication'>Authentication</h1>
<p>1、创建一个ApiApplication，获得<code>appid</code>和<code>appsecret</code>（由我们提供）</p>

<p>2、获得Namespace的id（由我们提供）</p>

<p>3、构建Authorization header</p>

<p><code>header</code>值的形式：<code>appid</code>:<code>encoded_data</code></p>

<p><code>appid</code>：为第一步获取到的<code>appid</code></p>

<p><code>encoded_data</code>：以<code>appsecret</code>为key，用JWT的HS256进行加密，加密payload为<code>{&quot;namespace_id&quot;:id}</code>（id为Integer）</p>

<p>示例：</p>

<p><code>appid: 56dc47367f8c775cf2318aa29345af558ad8aa2835bc3cc1d4416abfa94bd721</code></p>

<p><code>appsecret: 7bb73122837c4befb9c6593287f73a5e915415fe29f5aeb182717b66e873e96b</code></p>

<p><code>namespace_id: 1</code></p>

<p>JWT的</p>

<p>HEADER为：<code>{&quot;typ&quot;:&quot;JWT&quot;,&quot;alg&quot;:&quot;HS256&quot;}</code>
PAYLOAD为：<code>{&quot;namespace_id&quot;:1}</code></p>

<p>计算出<code>encoded_data</code>为：</p>

<p><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYW1lc3BhY2VfaWQiOjF9.z-RcFpDiYBXAO8i88M_x1JpJRr6CDMo8sb1rU6dw-0E</code></p>

<p>最终构建出<code>Authorization</code> header的值为： </p>

<p><code>56dc47367f8c775cf2318aa29345af558ad8aa2835bc3cc1d4416abfa94bd721:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJuYW1lc3BhY2VfaWQiOjF9.z-RcFpDiYBXAO8i88M_x1JpJRr6CDMo8sb1rU6dw-0E</code></p>

<p>可以用<a href="https://jwt.io">jwt.io</a>进行测试</p>

<p>实际使用中，处于安全的考虑，最好在payload中加入过期时间，如：</p>

<p><code>{&quot;namespace_id&quot;:1,&quot;exp&quot;:1535553256}</code></p>
<h1 id='pagination'>Pagination</h1>
<ul>
<li>参数

<ul>
<li><code>per_page</code> 每页多少个，默认<code>24</code>，范围<code>1~100</code></li>
<li><code>page</code> 页数</li>
</ul></li>
<li>接口返回 Header (<strong>如果返回有以下Header，表示数据有分页</strong>)

<ul>
<li>X-SLP-Current-Page: 当前页数</li>
<li>X-SLP-Total-Pages: 总页数</li>
<li>X-SLP-Total-Count: 总个数</li>
</ul></li>
<li>例：<code>GET /api/v4/yaw/flows/:id/journeys?per_page=30&amp;page=3</code></li>
</ul>
<h1 id='wechat-client'>Wechat Client</h1>
<p>注：</p>

<ul>
<li>access_token和jsapi_ticket都是在过期时间之前，可以一直使用，请求得到后而缓存之</li>
<li>不要用access_token去微信端请求jsapi_ticket，jsapi_ticket通过我们提供的接口获取</li>
</ul>
<h2 id='access_token'>access_token</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/wechat_clients/access_token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "access_token": "15_2FkbrFbJuemSy3ANqLmHNu65bpflFlORFTO8tqnvw5a1C0EhF-nfGAvmRhjHqX9-bc8yWqk_2ezUfINwwGLvisa5kgrLQzOKP1rN6SxTixiDklu1fA3UK0GsO_a5nmrkfo_B44xcvtpEj78sVMKcAIAEVT",</span>
<span class="s">  "expired_at": "1541041188" // 过期的 unix 时间戳</span>
<span class="s">}</span>
</code></pre>
<p><code>GET /api/v4/wechat_clients/access_token</code></p>

<p><strong>Parameters</strong></p>

<ul>
<li>  None</li>
</ul>

<p><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140183">微信文档</a></p>
<h2 id='jsapi_ticket'>jsapi_ticket</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/wechat_clients/jsapi_ticket</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "ticket": "sM4AOVdWfPE4DxkXGEs8VAT3lleStXwJQ-0K5TVdAa6VYKz9sECvxATXHT4fR5Vcqy8B4XnR3_fiV-xuSIWfjQ",</span>
<span class="s">  "expired_at": "1535715059" // 过期的 unix 时间戳</span>
<span class="s">}</span>
</code></pre>
<p><code>GET /api/v4/wechat_clients/jsapi_ticket</code></p>

<p><strong>Parameters</strong></p>

<ul>
<li>  None</li>
</ul>
<h1 id='pushes'>Pushes</h1><h2 id='14a8535075'>微信推送</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/v4/pushes/wechat</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "title":"Happy Day",</span>
<span class="s">  "description":"Is Really A Happy Day",</span>
<span class="s">  "url":"URL",</span>
<span class="s">  "picurl":"PIC_URL"</span>
<span class="s">}</span>

</code></pre><h3 id='news_entity'>news_entity 结构</h3>
<p>结构固定，以下4个key都是必须的，具体意思参考微信<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140547">微信客服消息</a></p>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "template_id": "7L5ZG7D0VtqOnKp07bskkJ7XA7veVqIO2VYeY3aYLtY",</span>
<span class="s">  "url": "http://weixin.qq.com/download",</span>
<span class="s">  "data": {</span>
<span class="s">    "first": {</span>
<span class="s">      "value": "恭喜你购买成功！",</span>
<span class="s">      "color": "#173177"</span>
<span class="s">    },</span>
<span class="s">    "keyword1": {</span>
<span class="s">      "value": "巧克力",</span>
<span class="s">      "color": "#173177"</span>
<span class="s">    },</span>
<span class="s">    "keyword2": {</span>
<span class="s">      "value": "39.8元",</span>
<span class="s">      "color": "#173177"</span>
<span class="s">    },</span>
<span class="s">    "remark": {</span>
<span class="s">      "value": "欢迎再次购买！",</span>
<span class="s">      "color": "#173177"</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">}</span>

</code></pre><h3 id='template_entity'>template_entity 结构</h3>
<p>结构固定，但data的实际结构会根据模板而改变，具体意思参考<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140547">微信客服消息</a></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>openids</td>
<td>Array</td>
<td>Required 接收用户的openid的集合</td>
</tr>
<tr>
<td>news_entity</td>
<td>Object</td>
<td><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140547">微信客服消息</a></td>
</tr>
<tr>
<td>template_entity</td>
<td>Object</td>
<td><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140547">微信客服消息</a></td>
</tr>
</tbody></table>

<p><code>news_entity</code>、<code>template_entity</code> 两者必须有一个。如果都存在，微信推送会先尝试客服消息，当客服消息失败时，再尝试模板消息</p>
<h3 id='response'>Response</h3>
<p><code>Status: 200 OK</code></p>

<p><strong>no body</strong></p>
<h1 id='flows'>Flows</h1><h2 id='155570b4f1'>创建组织流程</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/yaw/flows/8</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "id":8,</span>
<span class="s">  "title":"简单流程",</span>
<span class="s">  "fields":[</span>
<span class="s">    {</span>
<span class="s">      "id":38761,</span>
<span class="s">      "title":"别填",</span>
<span class="s">      "description":null</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":38806,</span>
<span class="s">      "title":"明细清单",</span>
<span class="s">      "description":null</span>
<span class="s">    }</span>
<span class="s">  ],</span>
<span class="s">  "vertices":[</span>
<span class="s">    {</span>
<span class="s">      "id":78,</span>
<span class="s">      "name":"开始节点",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Initial"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":80,</span>
<span class="s">      "name":"流程节点3",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Normal"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":79,</span>
<span class="s">      "name":"结束节点",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Final"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":90,</span>
<span class="s">      "name":"流程节点2",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Normal"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":91,</span>
<span class="s">      "name":"流程节点1",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Normal"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":113,</span>
<span class="s">      "name":"开始节点",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Initial"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":114,</span>
<span class="s">      "name":"结束节点",</span>
<span class="s">      "type":"YetAnotherWorkflow::Vertex::Final"</span>
<span class="s">    }</span>
<span class="s">  ],</span>
<span class="s">  "edges":[</span>
<span class="s">    {</span>
<span class="s">      "id":101,</span>
<span class="s">      "from_vertex_id":78,</span>
<span class="s">      "to_vertex_id":91</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":92,</span>
<span class="s">      "from_vertex_id":80,</span>
<span class="s">      "to_vertex_id":79</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":103,</span>
<span class="s">      "from_vertex_id":90,</span>
<span class="s">      "to_vertex_id":80</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      "id":102,</span>
<span class="s">      "from_vertex_id":91,</span>
<span class="s">      "to_vertex_id":90</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>

</code></pre>
<p><code>GET /api/v4/yaw/flows/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>流程id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='abb5975e52'>获取发起的流程列表</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/yaw/flows/110/journeys</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">29</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">2</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id":110,</span>
<span class="s">    "sn":"820180503184630000029",</span>
<span class="s">    "status":"processing",</span>
<span class="s">    "current_duration_threshold":null,</span>
<span class="s">    "created_at":"2018-06-06T15:39:10.532+08:00",</span>
<span class="s">    "updated_at":"2018-06-06T15:39:10.532+08:00",</span>
<span class="s">    "current_vertex_id":91,</span>
<span class="s">    "reviewer_vertex_ids":[</span>
<span class="s">      78</span>
<span class="s">    ],</span>
<span class="s">    "response":{</span>
<span class="s">      "id":548288,</span>
<span class="s">      "cached_values":{</span>
<span class="s">        "38761":{</span>
<span class="s">          "value":[</span>
<span class="s">            "123123123"</span>
<span class="s">          ],</span>
<span class="s">          "text_value":[</span>
<span class="s">            "123123123"</span>
<span class="s">          ],</span>
<span class="s">          "exported_value":[</span>
<span class="s">            "123123123"</span>
<span class="s">          ]</span>
<span class="s">        }</span>
<span class="s">      }</span>
<span class="s">    },</span>
<span class="s">    "user":{</span>
<span class="s">      "id":17013,</span>
<span class="s">      "name":"aaaa",</span>
<span class="s">      "identifier":"12345",</span>
<span class="s">      "headimgurl":"/non-digested-assets/avatars/default.png"</span>
<span class="s">    }</span>
<span class="s">  },</span>
<span class="s">  ...</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/yaw/flows/:id/journeys</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>流程id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='moment'>获取某条流程的所有Moment</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/yaw/journeys/392/moments</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 392,</span>
<span class="s">    "status": "proposed",</span>
<span class="s">    "comment": null,</span>
<span class="s">    "esignature": "data:image/png;base64,something",</span>
<span class="s">    "created_at": "2018-06-29T15:09:31.835+08:00",</span>
<span class="s">    "updated_at": "2018-06-29T15:09:31.835+08:00",</span>
<span class="s">    "vertex_id": 168,</span>
<span class="s">    "user": {</span>
<span class="s">      "id": 127057,</span>
<span class="s">      "name": "cacao",</span>
<span class="s">      "identifier": null,</span>
<span class="s">      "headimgurl": "/non-digested-assets/avatars/default.png"</span>
<span class="s">    }</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 393,</span>
<span class="s">    "status": "approved",</span>
<span class="s">    "comment": "",</span>
<span class="s">    "esignature": "data:image/png;base64,something",</span>
<span class="s">    "created_at": "2018-06-29T15:09:46.297+08:00",</span>
<span class="s">    "updated_at": "2018-06-29T15:09:46.297+08:00",</span>
<span class="s">    "vertex_id": 170,</span>
<span class="s">    "user": {</span>
<span class="s">      "id": 127057,</span>
<span class="s">      "name": "cacao",</span>
<span class="s">      "identifier": null,</span>
<span class="s">      "headimgurl": "/non-digested-assets/avatars/default.png"</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/yaw/journeys/:id/moments</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>流程id</td>
<td></td>
</tr>
</tbody></table>
<h1 id='users'>Users</h1><h2 id='c874682816'>查询当前空间下所有用户</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "第一个管理员",</span>
<span class="s">    "nickname": "",</span>
<span class="s">    "phone": "1111111111",</span>
<span class="s">    "identifier": "1111111111",</span>
<span class="s">    "qq": "123",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": "123",</span>
<span class="s">    "imported_alias": "第一个管理员",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [{</span>
<span class="s">      "id": 1,</span>
<span class="s">      "name": "b1",</span>
<span class="s">      "full_name": "bq-b1",</span>
<span class="s">      "color": "#e91e63",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 9</span>
<span class="s">    }, {</span>
<span class="s">      "id": 3,</span>
<span class="s">      "name": "a1",</span>
<span class="s">      "full_name": "a1",</span>
<span class="s">      "color": "#ff5722",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 4</span>
<span class="s">    }, {</span>
<span class="s">      "id": 8,</span>
<span class="s">      "name": "a2",</span>
<span class="s">      "full_name": "a2",</span>
<span class="s">      "color": "#673ab7",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 1</span>
<span class="s">    }</span>
<span class="s">    },</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "第二个管理员",</span>
<span class="s">    "nickname": "",</span>
<span class="s">    "phone": "12222222222",</span>
<span class="s">    "identifier": "12222222222",</span>
<span class="s">    "qq": "123",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": "123",</span>
<span class="s">    "imported_alias": "第一个管理员",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [{</span>
<span class="s">      "id": 1,</span>
<span class="s">      "name": "b1",</span>
<span class="s">      "full_name": "bq-b1",</span>
<span class="s">      "color": "#e91e63",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 9</span>
<span class="s">    }, {</span>
<span class="s">      "id": 3,</span>
<span class="s">      "name": "a1",</span>
<span class="s">      "full_name": "a1",</span>
<span class="s">      "color": "#ff5722",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 4</span>
<span class="s">    }, {</span>
<span class="s">      "id": 8,</span>
<span class="s">      "name": "a2",</span>
<span class="s">      "full_name": "a2",</span>
<span class="s">      "color": "#673ab7",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 1</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/users</code></p>
<h2 id='6d47866b22'>所在组织</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/users/14473/organizations</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="s">{</span>
<span class="s">  "name": "name",</span>
<span class="s">  "description": "description",</span>
<span class="s">  "application_strategy": "must_approved",</span>
<span class="s">  "founder_id": 3,</span>
<span class="s">  "patent_id": 13</span>
<span class="s">}</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 14473,</span>
<span class="s">    "name": "child_1",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2017-04-18T16:33:07.408+08:00",</span>
<span class="s">    "updated_at": "2017-12-06T17:52:27.556+08:00",</span>
<span class="s">    "children_count": 1,</span>
<span class="s">    "parent_id": 14472,</span>
<span class="s">    "ancestry": "14472"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 1935,</span>
<span class="s">    "name": "测试组织",</span>
<span class="s">    "description": "&lt;p&gt;aaa&lt;/p&gt;",</span>
<span class="s">    "description_text": "aaa",</span>
<span class="s">    "created_at": "2015-05-25T15:58:45.083+08:00",</span>
<span class="s">    "updated_at": "2018-04-06T15:37:24.712+08:00",</span>
<span class="s">    "children_count": 2,</span>
<span class="s">    "parent_id": null,</span>
<span class="s">    "ancestry": null</span>
<span class="s">  },</span>
<span class="s">  ...</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/users/:id/organizations</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>用户id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='b6bb36669d'>查询用户信息</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/users/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "id": 1,</span>
<span class="s">  "name": "第一个管理员",</span>
<span class="s">  "nickname": "",</span>
<span class="s">  "phone": "1111111111",</span>
<span class="s">  "identifier": "1111111111",</span>
<span class="s">  "qq": "123",</span>
<span class="s">  "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">  "openid": "123",</span>
<span class="s">  "imported_alias": "第一个管理员",</span>
<span class="s">  "from_wechat": false,</span>
<span class="s">  "tags": [{</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "b1",</span>
<span class="s">    "full_name": "bq-b1",</span>
<span class="s">    "color": "#e91e63",</span>
<span class="s">    "tag_group_id": 1,</span>
<span class="s">    "taggings_count": 9</span>
<span class="s">  }, {</span>
<span class="s">    "id": 3,</span>
<span class="s">    "name": "a1",</span>
<span class="s">    "full_name": "a1",</span>
<span class="s">    "color": "#ff5722",</span>
<span class="s">    "tag_group_id": 1,</span>
<span class="s">    "taggings_count": 4</span>
<span class="s">  }, {</span>
<span class="s">    "id": 8,</span>
<span class="s">    "name": "a2",</span>
<span class="s">    "full_name": "a2",</span>
<span class="s">    "color": "#673ab7",</span>
<span class="s">    "tag_group_id": 1,</span>
<span class="s">    "taggings_count": 1</span>
<span class="s">  }</span>
<span class="s">}</span>
</code></pre>
<p><code>GET /api/v4/users/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>用户id</td>
<td></td>
</tr>
</tbody></table>
<h1 id='organizations'>Organizations</h1><h2 id='cb9cf88fe7'>所有组织</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">4</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "开发部",</span>
<span class="s">    "description": "&lt;p&gt;您可以根据需要更改名字及描述，或者删除组织&lt;/p&gt;",</span>
<span class="s">    "description_text": "您可以根据需要更改名字及描述，或者删除组织",</span>
<span class="s">    "created_at": "2016-08-26T18:08:22.624+08:00",</span>
<span class="s">    "updated_at": "2019-07-25T11:00:59.249+08:00",</span>
<span class="s">    "children_count": 4,</span>
<span class="s">    "parent_id": null,</span>
<span class="s">    "ancestry": null,</span>
<span class="s">    "application_strategy": "closed",</span>
<span class="s">    "profile_submission": {</span>
<span class="s">      "entries": [</span>
<span class="s">          {</span>
<span class="s">            "id": 513216,</span>
<span class="s">            "field_id": 4394,</span>
<span class="s">            "option_id": null,</span>
<span class="s">            "value": "2019-07-25",</span>
<span class="s">            "choice_id": null,</span>
<span class="s">            "value_id": null,</span>
<span class="s">            "latitude": null,</span>
<span class="s">            "longitude": null,</span>
<span class="s">            "group_id": null,</span>
<span class="s">            "detail_id": null</span>
<span class="s">          },</span>
<span class="s">          {</span>
<span class="s">            "id": 513215,</span>
<span class="s">            "field_id": 4393,</span>
<span class="s">            "option_id": 2948,</span>
<span class="s">            "value": "B",</span>
<span class="s">            "choice_id": null,</span>
<span class="s">            "value_id": null,</span>
<span class="s">            "latitude": null,</span>
<span class="s">            "longitude": null,</span>
<span class="s">            "group_id": null,</span>
<span class="s">            "detail_id": null</span>
<span class="s">          },</span>
<span class="s">          {</span>
<span class="s">            "id": 513214,</span>
<span class="s">            "field_id": 4393,</span>
<span class="s">            "option_id": 2947,</span>
<span class="s">            "value": "A",</span>
<span class="s">            "choice_id": null,</span>
<span class="s">            "value_id": null,</span>
<span class="s">            "latitude": null,</span>
<span class="s">            "longitude": null,</span>
<span class="s">            "group_id": null,</span>
<span class="s">            "detail_id": null</span>
<span class="s">          },</span>
<span class="s">          {</span>
<span class="s">            "id": 513213,</span>
<span class="s">            "field_id": 4380,</span>
<span class="s">            "option_id": 2933,</span>
<span class="s">            "value": "A",</span>
<span class="s">            "choice_id": null,</span>
<span class="s">            "value_id": null,</span>
<span class="s">            "latitude": null,</span>
<span class="s">            "longitude": null,</span>
<span class="s">            "group_id": null,</span>
<span class="s">            "detail_id": null</span>
<span class="s">          },</span>
<span class="s">          {</span>
<span class="s">            "id": 513212,</span>
<span class="s">            "field_id": 4379,</span>
<span class="s">            "option_id": null,</span>
<span class="s">            "value": "123",</span>
<span class="s">            "choice_id": null,</span>
<span class="s">            "value_id": null,</span>
<span class="s">            "latitude": null,</span>
<span class="s">            "longitude": null,</span>
<span class="s">            "group_id": null,</span>
<span class="s">            "detail_id": null</span>
<span class="s">          }</span>
<span class="s">        ],</span>
<span class="s">        "cached_values": {</span>
<span class="s">            "4379": {</span>
<span class="s">                "value": [</span>
<span class="s">                    "123"</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "123"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "123"</span>
<span class="s">                ]</span>
<span class="s">            },</span>
<span class="s">            "4380": {</span>
<span class="s">                "value": [</span>
<span class="s">                    {</span>
<span class="s">                        "id": 2933,</span>
<span class="s">                        "gid": "gid://skylark/Option/2933",</span>
<span class="s">                        "value": "A"</span>
<span class="s">                    }</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "A"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "A"</span>
<span class="s">                ]</span>
<span class="s">            },</span>
<span class="s">            "4393": {</span>
<span class="s">                "value": [</span>
<span class="s">                    {</span>
<span class="s">                        "id": 2947,</span>
<span class="s">                        "gid": "gid://skylark/Option/2947",</span>
<span class="s">                        "value": "A"</span>
<span class="s">                    },</span>
<span class="s">                    {</span>
<span class="s">                        "id": 2948,</span>
<span class="s">                        "gid": "gid://skylark/Option/2948",</span>
<span class="s">                        "value": "B"</span>
<span class="s">                    }</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "A",</span>
<span class="s">                    "B"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "A，B"</span>
<span class="s">                ]</span>
<span class="s">            },</span>
<span class="s">            "4394": {</span>
<span class="s">                "value": [</span>
<span class="s">                    "2019-07-25"</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "2019-07-25"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "2019-07-25"</span>
<span class="s">                ]</span>
<span class="s">            }</span>
<span class="s">        }</span>
<span class="s">    }</span>
<span class="s">},</span>
<span class="s">  {</span>
<span class="s">    "id": 15113,</span>
<span class="s">    "name": "组织_a",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2018-08-14T10:00:29.691+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:00:40.625+08:00",</span>
<span class="s">    "children_count": 1,</span>
<span class="s">    "parent_id": 14516,</span>
<span class="s">    "ancestry": "14516"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 15114,</span>
<span class="s">    "name": "组织_a_a",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2018-08-14T10:00:40.624+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:00:40.624+08:00",</span>
<span class="s">    "children_count": 0,</span>
<span class="s">    "parent_id": 15113,</span>
<span class="s">    "ancestry": "14516/15113"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 15115,</span>
<span class="s">    "name": "组织_b",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2018-08-14T10:00:49.660+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:00:49.660+08:00",</span>
<span class="s">    "children_count": 0,</span>
<span class="s">    "parent_id": 14516,</span>
<span class="s">    "ancestry": "14516"</span>
<span class="s">  }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/organizations</code></p>

<p><strong>Parameters</strong></p>

<ul>
<li>  None</li>
</ul>
<h2 id='c8c51b76c7'>顶级组织</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations/roots</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">1</span>

[
  {
    "id": 14516,
    "name": "第一个组织",
    "description": "您可以根据需要更改名字及描述，或者删除组织",
    "description_text": "您可以根据需要更改名字及描述，或者删除组织",
    "created_at": "2017-12-25T16:06:13.111+08:00",
    "updated_at": "2018-08-14T10:00:49.663+08:00",
    "children_count": 2,
    "parent_id": null,
    "ancestry": null
  }
]

</code></pre>
<p><code>GET /api/v4/organizations/roots</code></p>

<p><strong>Parameters</strong></p>

<ul>
<li>  None</li>
</ul>
<h2 id='cda11de7f2'>子代组织</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations/15113/children</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">2</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 15113,</span>
<span class="s">    "name": "组织_a",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2018-08-14T10:00:29.691+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:00:40.625+08:00",</span>
<span class="s">    "children_count": 1,</span>
<span class="s">    "parent_id": 14516,</span>
<span class="s">    "ancestry": "14516"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 15115,</span>
<span class="s">    "name": "组织_b",</span>
<span class="s">    "description": "",</span>
<span class="s">    "description_text": "",</span>
<span class="s">    "created_at": "2018-08-14T10:00:49.660+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:00:49.660+08:00",</span>
<span class="s">    "children_count": 0,</span>
<span class="s">    "parent_id": 14516,</span>
<span class="s">    "ancestry": "14516"</span>
<span class="s">  }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/organizations/:id/children</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>父级组织id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='02e4569f06'>组织成员</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations/:organization_id/members</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">3</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 127059,</span>
<span class="s">    "name": "user_a",</span>
<span class="s">    "nickname": null,</span>
<span class="s">    "sex": null,</span>
<span class="s">    "phone": null,</span>
<span class="s">    "identifier": "user_a",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "created_at": "2018-08-14T10:10:19.434+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:10:19.434+08:00",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default_96.png"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 127060,</span>
<span class="s">    "name": "user_b",</span>
<span class="s">    "nickname": null,</span>
<span class="s">    "sex": null,</span>
<span class="s">    "phone": null,</span>
<span class="s">    "identifier": "user_b",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "created_at": "2018-08-14T10:10:24.671+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:10:24.671+08:00",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default_96.png"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 127061,</span>
<span class="s">    "name": "user_c",</span>
<span class="s">    "nickname": null,</span>
<span class="s">    "sex": null,</span>
<span class="s">    "phone": null,</span>
<span class="s">    "identifier": "user_c",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "created_at": "2018-08-14T10:10:29.831+08:00",</span>
<span class="s">    "updated_at": "2018-08-14T10:10:29.831+08:00",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default_96.png"</span>
<span class="s">  }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/organizations/:id/members</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>with_descendants</td>
<td>string</td>
<td>Optional 传任意值，代表包含子孙后代组织的成员</td>
<td></td>
</tr>
</tbody></table>
<h2 id='92cfa6d383'>创建组织</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/v4/organizations/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">  "name": "name",</span>
<span class="s">  "description": "description",</span>
<span class="s">  "application_strategy": "must_approved",</span>
<span class="s">  "founder_id": 3,</span>
<span class="s">  "patent_id": 13</span>
<span class="s">}</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">  "id": 25,</span>
<span class="s">  "name": "name",</span>
<span class="s">  "description": "description",</span>
<span class="s">  "description_text": "description",</span>
<span class="s">  "created_at": "2018-12-06T10:35:35.203+08:00",</span>
<span class="s">  "updated_at": "2018-12-06T10:35:35.203+08:00",</span>
<span class="s">  "children_count": 0,</span>
<span class="s">  "parent_id": "13",</span>
<span class="s">  "ancestry": "abc",</span>
<span class="s">  "application_strategy": "must_approved"</span>
<span class="s">}</span>

</code></pre>
<p><code>POST /api/v4/organizations/</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>名字</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>描述</td>
<td></td>
</tr>
<tr>
<td>application_strategy</td>
<td>string</td>
<td>审核状态</td>
<td>[:must_approved, :auto_approved, :closed]</td>
</tr>
<tr>
<td>founder_id</td>
<td>integer</td>
<td>创建者id</td>
<td></td>
</tr>
<tr>
<td>patent_id</td>
<td>integer</td>
<td>父级组织id</td>
<td>创建顶级组织时不需要</td>
</tr>
</tbody></table>
<h2 id='66dd10a168'>创建组织成员</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/v4/organizations/20/members</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack_123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10086100101"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">  "id": 20,</span>
<span class="s">  "name": "jack",</span>
<span class="s">  "nickname": null,</span>
<span class="s">  "sex": null,</span>
<span class="s">  "phone": "10086100101",</span>
<span class="s">  "identifier": "jack_123",</span>
<span class="s">  "openid": null,</span>
<span class="s">  "created_at": "2018-12-06T10:54:34.901+08:00",</span>
<span class="s">  "updated_at": "2018-12-06T10:54:34.901+08:00"</span>
<span class="s">}</span>

</code></pre>
<p><code>POST /api/v4/organizations/:organization_id/members</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>名字</td>
<td></td>
</tr>
<tr>
<td>identifier</td>
<td>string</td>
<td>识别码</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>电话号码</td>
<td></td>
</tr>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='29d823bb6d'>修改组织信息</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v4/organizations/21</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"修改组织名字"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"修改组织描述"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"application_strategy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"must_approved"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "id": 21,</span>
<span class="s">    "name": "修改组织名字",</span>
<span class="s">    "description": "修改组织描述",</span>
<span class="s">    "description_text": "修改组织描述",</span>
<span class="s">    "created_at": "2018-12-05T10:19:41.202+08:00",</span>
<span class="s">    "updated_at": "2018-12-13T09:29:52.080+08:00",</span>
<span class="s">    "children_count": 1,</span>
<span class="s">    "parent_id": null,</span>
<span class="s">    "ancestry": null,</span>
<span class="s">    "application_strategy": "must_approved"</span>
<span class="s">}</span>

</code></pre>
<p><code>PUS /api/v4/organizations/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>名字</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>描述</td>
<td></td>
</tr>
<tr>
<td>application_strategy</td>
<td>string</td>
<td>审核状态</td>
<td>[:must_approved, :auto_approved, :closed]</td>
</tr>
</tbody></table>
<h2 id='59985a21a4'>删除组织</h2><pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/api/v4/organizations/21</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>

</code></pre>
<p><code>DELETE /api/v4/organizations/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='3e58460320'>修改组织成员信息</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v4/organizations/23/members/20</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jack_123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10086100101"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "id": 20,</span>
<span class="s">    "name": "jack",</span>
<span class="s">    "nickname": "jack",</span>
<span class="s">    "sex": null,</span>
<span class="s">    "phone": "10086100101",</span>
<span class="s">    "identifier": "jack_123",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "created_at": "2018-12-06T10:54:34.901+08:00",</span>
<span class="s">    "updated_at": "2018-12-13T10:08:35.305+08:00"</span>
<span class="s">}</span>

</code></pre>
<p><code>PUT /api/v4/organizations/:organization_id/members/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>名字</td>
<td></td>
</tr>
<tr>
<td>identifier</td>
<td>string</td>
<td>识别码</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>电话号码</td>
<td></td>
</tr>
</tbody></table>
<h2 id='874a00b2ee'>增加组织人员</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v4/organizations/23/members/add</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"member_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">19</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">[19]</span>

</code></pre>
<p><code>PUT /api/v4/organizations/:organization_id/members/add</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>member_ids</td>
<td>array</td>
<td>成员id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='e10718abdb'>移除组织成员</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v4/organizations/23/members/remove</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"member_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">19</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">[19]</span>

</code></pre>
<p><code>PUT /api/v4/organizations/:organization_id/members/remove</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>member_ids</td>
<td>array</td>
<td>成员id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='cb023d1f3e'>增加组织管理员</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/api/v4/organizations/23/administrators</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="w">
  </span><span class="s2">"access_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "id": 33,</span>
<span class="s">    "user": {</span>
<span class="s">        "id": 19,</span>
<span class="s">        "name": "123",</span>
<span class="s">        "nickname": null,</span>
<span class="s">        "phone": "19929029450",</span>
<span class="s">        "identifier": "qwecasca",</span>
<span class="s">        "qq": null,</span>
<span class="s">        "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">        "openid": null,</span>
<span class="s">        "imported_alias": "123",</span>
<span class="s">        "from_wechat": false,</span>
<span class="s">        "tags": [],</span>
<span class="s">        "custom_values": []</span>
<span class="s">    },</span>
<span class="s">    "access": {</span>
<span class="s">        "id": 1,</span>
<span class="s">        "name": "超级管理员",</span>
<span class="s">        "actions": [</span>
<span class="s">            1,</span>
<span class="s">            3,</span>
<span class="s">            4</span>
<span class="s">        ],</span>
<span class="s">        "founded": false</span>
<span class="s">    },</span>
<span class="s">    "organization": {</span>
<span class="s">        "id": 23,</span>
<span class="s">        "name": "123123",</span>
<span class="s">        "description": "123123",</span>
<span class="s">        "created_at": "2018-12-05T10:41:33.068+08:00"</span>
<span class="s">    }</span>
<span class="s">}</span>

</code></pre>
<p><code>POST /api/v4/organizations/:organization_id/administrators</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>integer</td>
<td>成员id</td>
<td></td>
</tr>
<tr>
<td>access_id</td>
<td>integer</td>
<td>权限id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='1f3fcec323'>删除组织管理员</h2><pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/api/v4/organizations/23/administrators/33</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>

</code></pre>
<p><code>DELETE /api/v4/organizations/:organization_id/administrators/:id</code></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>关联管理员id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='02b8482275'>修改组织管理员权限</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/api/v4/organizations/23/administrators/33</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="w">
  </span><span class="s2">"access_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">  "id": 33,</span>
<span class="s">  "user": {</span>
<span class="s">    "id": 19,</span>
<span class="s">    "name": "123",</span>
<span class="s">    "nickname": null,</span>
<span class="s">    "phone": "19929029450",</span>
<span class="s">    "identifier": "qwecasca",</span>
<span class="s">    "qq": null,</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "imported_alias": "123",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [],</span>
<span class="s">    "custom_values": []</span>
<span class="s">  },</span>
<span class="s">  "access": {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "超级管理员",</span>
<span class="s">    "actions": [</span>
<span class="s">      1,</span>
<span class="s">      3,</span>
<span class="s">      4</span>
<span class="s">    ],</span>
<span class="s">    "founded": false</span>
<span class="s">  },</span>
<span class="s">  "organization": {</span>
<span class="s">    "id": 23,</span>
<span class="s">    "name": "123123",</span>
<span class="s">    "description": "123123",</span>
<span class="s">    "created_at": "2018-12-05T10:41:33.068+08:00"</span>
<span class="s">  }</span>
<span class="s">}</span>

</code></pre>
<p><code>PUT /api/v4/organizations/:organization_id/administrators/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>integer</td>
<td>成员id</td>
<td></td>
</tr>
<tr>
<td>access_id</td>
<td>integer</td>
<td>权限id</td>
<td></td>
</tr>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>关联管理员id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='5c224df13c'>查询当前组织管理员</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations/:organization_id/administrators</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 18,</span>
<span class="s">    "user": {</span>
<span class="s">      "id": 3,</span>
<span class="s">      "name": "a11",</span>
<span class="s">      "nickname": null,</span>
<span class="s">      "phone": "18828072450",</span>
<span class="s">      "identifier": "18828072450",</span>
<span class="s">      "qq": null,</span>
<span class="s">      "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">      "openid": null,</span>
<span class="s">      "imported_alias": "a11",</span>
<span class="s">      "from_wechat": false,</span>
<span class="s">      "tags": [],</span>
<span class="s">      "custom_values": []</span>
<span class="s">    },</span>
<span class="s">    "access": {</span>
<span class="s">      "id": 2,</span>
<span class="s">      "name": "创建者",</span>
<span class="s">      "actions": [</span>
<span class="s">        1,</span>
<span class="s">        3,</span>
<span class="s">        4</span>
<span class="s">      ],</span>
<span class="s">      "founded": true</span>
<span class="s">    },</span>
<span class="s">    "organization": {</span>
<span class="s">      "id": 23,</span>
<span class="s">      "name": "123123",</span>
<span class="s">      "description": "123123",</span>
<span class="s">      "created_at": "2018-12-05T10:41:33.068+08:00"</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/organizations/:organization_id/administrators</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='0e028a78c9'>查询当前组织创建者</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/organizations/:organization_id/founder</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">  "id": 18,</span>
<span class="s">  "user": {</span>
<span class="s">    "id": 3,</span>
<span class="s">    "name": "a11",</span>
<span class="s">    "nickname": null,</span>
<span class="s">    "phone": "18828072450",</span>
<span class="s">    "identifier": "18828072450",</span>
<span class="s">    "qq": null,</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": null,</span>
<span class="s">    "imported_alias": "a11",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [],</span>
<span class="s">    "custom_values": []</span>
<span class="s">  },</span>
<span class="s">  "access": {</span>
<span class="s">    "id": 2,</span>
<span class="s">    "name": "创建者",</span>
<span class="s">    "actions": [</span>
<span class="s">      1,</span>
<span class="s">      3,</span>
<span class="s">      4</span>
<span class="s">    ],</span>
<span class="s">    "founded": true</span>
<span class="s">  },</span>
<span class="s">  "organization": {</span>
<span class="s">    "id": 23,</span>
<span class="s">    "name": "123123",</span>
<span class="s">    "description": "123123",</span>
<span class="s">    "created_at": "2018-12-05T10:41:33.068+08:00"</span>
<span class="s">  }</span>
<span class="s">}</span>

</code></pre>
<p><code>GET /api/v4/organizations/:organization_id/founder</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>organization_id</td>
<td>integer</td>
<td>组织id</td>
<td></td>
</tr>
</tbody></table>
<h1 id='forms'>Forms</h1><h2 id='1de85d87d5'>表单信息</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/forms/3987</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">{</span>
<span class="s">  "id":3987,</span>
<span class="s">  "title":"这是一个表单",</span>
<span class="s">  "description":"&lt;p&gt;哈哈&lt;/p&gt;",</span>
<span class="s">  "created_at":"2018-02-08T15:32:02.921+08:00",</span>
<span class="s">  "updated_at":"2018-05-21T22:07:51.748+08:00",</span>
<span class="s">  "status":"published",</span>
<span class="s">  "fields":[</span>
<span class="s">    {</span>
<span class="s">      "id":38664,</span>
<span class="s">      "title":"文本",</span>
<span class="s">      "description":"",</span>
<span class="s">      "type":"Field::TextField",</span>
<span class="s">      "position":0,</span>
<span class="s">      "validations":[</span>
<span class="s">        "presence"</span>
<span class="s">      ],</span>
<span class="s">      "other_option":null,</span>
<span class="s">      "visibility":"public_visibility",</span>
<span class="s">      "marked":false,</span>
<span class="s">      "settings":{</span>
<span class="s">        "layout":"block",</span>
<span class="s">        "other_option_settings":{</span>
<span class="s">          "limit":{</span>

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38665,
      "title":"段落",
      "description":"",
      "type":"Field::TextArea",
      "position":1,
      "validations":[
        "presence"
      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38663,
      "title":"未命名标题",
      "description":"",
      "type":"Field::TextField",
      "position":2,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38666,
      "title":"章节",
      "description":"&lt;p&gt;章节细节&lt;/p&gt;",
      "type":"Field::SectionBreak",
      "position":3,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38667,
      "title":"整数",
      "description":"",
      "type":"Field::Integer",
      "position":4,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38668,
      "title":"日期时间",
      "description":"",
      "type":"Field::DateTime",
      "position":5,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "input_type":"datetime-local",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38669,
      "title":"单选",
      "description":"",
      "type":"Field::RadioButton",
      "position":6,
      "validations":[

      ],
      "other_option":"其他",
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"list",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null,
      "options":[
        {
          "id":31826,
          "value":"4",
          "settings":{
            "limit_settings":{

            }
          },
          "position":0
        }
      ]
    },
    {
      "id":38670,
      "title":"多选",
      "description":"",
      "type":"Field::CheckBox",
      "position":7,
      "validations":[
        "presence"
      ],
      "other_option":"其他",
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"list",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null,
      "options":[
        {
          "id":31827,
          "value":"4",
          "settings":{
            "limit_settings":{

            }
          },
          "position":1518075122
        }
      ]
    },
    {
      "id":38671,
      "title":"文件上传",
      "description":"",
      "type":"Field::File",
      "position":8,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38672,
      "title":"级联选择",
      "description":"",
      "type":"Field::CascadedSelect",
      "position":9,
      "validations":[
        "presence"
      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38673,
      "title":"组织",
      "description":"",
      "type":"Field::Organization",
      "position":10,
      "validations":[
        "presence"
      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38674,
      "title":"评分",
      "description":"",
      "type":"Field::Rating",
      "position":11,
      "validations":[
        "presence"
      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38675,
      "title":"地理位置",
      "description":"",
      "type":"Field::Location",
      "position":12,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null
    },
    {
      "id":38676,
      "title":"明细",
      "description":"呵呵",
      "type":"Field::Detail",
      "position":13,
      "validations":[

      ],
      "other_option":null,
      "visibility":"public_visibility",
      "marked":false,
      "settings":{
        "layout":"block",
        "button_name":"添加菜单",
        "other_option_settings":{
          "limit":{

          }
        },
        "length_limit":{

        }
      },
      "detail_id":null,
      "children":[
        {
          "id":38677,
          "title":"文本",
          "description":"",
          "type":"Field::TextField",
          "position":0,
          "validations":[
            "presence"
          ],
          "other_option":null,
          "visibility":"public_visibility",
          "marked":false,
          "settings":{
            "layout":"block",
            "other_option_settings":{
              "limit":{

              }
            },
            "length_limit":{

            }
          },
          "detail_id":38676
        },
        {
          "id":38678,
          "title":"评分",
          "description":"",
          "type":"Field::Rating",
          "position":1,
          "validations":[

          ],
          "other_option":null,
          "visibility":"public_visibility",
          "marked":false,
          "settings":{
            "layout":"block",
            "other_option_settings":{
              "limit":{

              }
            },
            "length_limit":{

            }
          },
          "detail_id":38676
        }
      ]
    }
  ]
}

</code></pre>
<p><code>GET /api/v4/forms/:id</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>表单id</td>
<td></td>
</tr>
</tbody></table>
<h2 id='52dced31b8'>表单数据</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/forms/548795/responses</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">X-SLP-Current-Page</span><span class="p">:</span> <span class="s">1</span>
<span class="na">X-SLP-Total-Pages</span><span class="p">:</span> <span class="s">3</span>
<span class="na">X-SLP-Total-Count</span><span class="p">:</span> <span class="s">100</span>
<span class="s">[</span>
<span class="s">    {</span>
<span class="s">        "id": 174,</span>
<span class="s">        "created_at": "2019-02-25T22:00:00.364+08:00",</span>
<span class="s">        "cached_values": {</span>
<span class="s">            "61": {</span>
<span class="s">                "value": [</span>
<span class="s">                    "dasdassaddsa"</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "dasdassaddsa"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "dasdassaddsa"</span>
<span class="s">                ]</span>
<span class="s">            }</span>
<span class="s">        },</span>
<span class="s">        "user": {</span>
<span class="s">            "id": 1,</span>
<span class="s">            "name": "第一个管理员",</span>
<span class="s">            "nickname": "",</span>
<span class="s">            "sex": null,</span>
<span class="s">            "phone": null,</span>
<span class="s">            "identifier": "759251fe10d79e6c823b",</span>
<span class="s">            "openid": null,</span>
<span class="s">            "created_at": "2018-11-02T15:00:17.714+08:00",</span>
<span class="s">            "updated_at": "2018-11-07T10:22:43.440+08:00",</span>
<span class="s">            "headimgurl": "/non-digested-assets/avatars/default_96.png",</span>
<span class="s">            "tags": [</span>
<span class="s">                {</span>
<span class="s">                    "id": 1,</span>
<span class="s">                    "name": "b1"</span>
<span class="s">                }</span>
<span class="s">            ]</span>
<span class="s">        },</span>
<span class="s">        "entries": [</span>
<span class="s">            {</span>
<span class="s">                "id": 117,</span>
<span class="s">                "field_id": 61,</span>
<span class="s">                "option_id": null,</span>
<span class="s">                "value": "dasdassaddsa",</span>
<span class="s">                "choice_id": null,</span>
<span class="s">                "value_id": null,</span>
<span class="s">                "latitude": null,</span>
<span class="s">                "longitude": null,</span>
<span class="s">                "group_id": null,</span>
<span class="s">                "detail_id": null</span>
<span class="s">            }</span>
<span class="s">        ]</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">        "id": 173,</span>
<span class="s">        "created_at": "2019-02-25T21:59:54.509+08:00",</span>
<span class="s">        "cached_values": {</span>
<span class="s">            "61": {</span>
<span class="s">                "value": [</span>
<span class="s">                    "231213321"</span>
<span class="s">                ],</span>
<span class="s">                "text_value": [</span>
<span class="s">                    "231213321"</span>
<span class="s">                ],</span>
<span class="s">                "exported_value": [</span>
<span class="s">                    "231213321"</span>
<span class="s">                ]</span>
<span class="s">            }</span>
<span class="s">        },</span>
<span class="s">        "user": {</span>
<span class="s">            "id": 1,</span>
<span class="s">            "name": "第一个管理员",</span>
<span class="s">            "nickname": "",</span>
<span class="s">            "sex": null,</span>
<span class="s">            "phone": null,</span>
<span class="s">            "identifier": "759251fe10d79e6c823b",</span>
<span class="s">            "openid": null,</span>
<span class="s">            "created_at": "2018-11-02T15:00:17.714+08:00",</span>
<span class="s">            "updated_at": "2018-11-07T10:22:43.440+08:00",</span>
<span class="s">            "headimgurl": "/non-digested-assets/avatars/default_96.png",</span>
<span class="s">            "tags": [</span>
<span class="s">                {</span>
<span class="s">                    "id": 1,</span>
<span class="s">                    "name": "b1"</span>
<span class="s">                }</span>
<span class="s">            ]</span>
<span class="s">        },</span>
<span class="s">        "entries": [</span>
<span class="s">            {</span>
<span class="s">                "id": 116,</span>
<span class="s">                "field_id": 61,</span>
<span class="s">                "option_id": null,</span>
<span class="s">                "value": "231213321",</span>
<span class="s">                "choice_id": null,</span>
<span class="s">                "value_id": null,</span>
<span class="s">                "latitude": null,</span>
<span class="s">                "longitude": null,</span>
<span class="s">                "group_id": null,</span>
<span class="s">                "detail_id": null</span>
<span class="s">            }</span>
<span class="s">        ]</span>
<span class="s">    }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/forms/:id/responses</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>表单id</td>
<td></td>
</tr>
</tbody></table>
<h1 id='attachments'>Attachments</h1><h2 id='711363c424'>查询</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/attachments/query?id[]=2474&amp;id[]=2475</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 2474,</span>
<span class="s">    "name": "屏幕快照 2018-07-16 下午3.40.46.png",</span>
<span class="s">    "size": "81702",</span>
<span class="s">    "mime_type": "image/png",</span>
<span class="s">    "extension": "image",</span>
<span class="s">    "extra_info": {},</span>
<span class="s">    "download_url": "http://7xlxax.dl1.z0.glb.clouddn.com/17013-1531909931-49d1c668335fe2fc660e92042431d544-1531909931258?attname=%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7+2018-07-16+%E4%B8%8B%E5%8D%883.40.46.png&amp;e=1532329592&amp;token=WFpC8JEsN77rEZRgdoQgQw-yB82e-j3fpp8dXB8Z:JZFJ7usX7rWZ6hxZgkdkq3WWhXw="</span>
<span class="s">  },</span>
<span class="s">  ...</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/attachments/query</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>array</td>
<td>附件id的集合</td>
<td></td>
</tr>
<tr>
<td>fops</td>
<td>string</td>
<td>七牛云图片处理的参数，<a href="https://developer.qiniu.com/search?keyword=%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86">文档</a></td>
<td></td>
</tr>
</tbody></table>
<h1 id='accesses'>Accesses</h1><h2 id='3389c548ae'>获取当前空间下所有权限</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/accesses</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">    {</span>
<span class="s">        "id": 1,</span>
<span class="s">        "name": "超级管理员",</span>
<span class="s">        "actions": [</span>
<span class="s">            1,</span>
<span class="s">            3,</span>
<span class="s">            4</span>
<span class="s">        ],</span>
<span class="s">        "founded": false</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">        "id": 7,</span>
<span class="s">        "name": "测试管理员",</span>
<span class="s">        "actions": [</span>
<span class="s">            4</span>
<span class="s">        ],</span>
<span class="s">        "founded": false</span>
<span class="s">    }</span>
<span class="s">]</span>

</code></pre>
<p><code>GET /api/v4/accesses</code></p>
<h1 id='settings'>Settings</h1><h2 id='95c0eddacd'>批量删除不在任何组织中的成员</h2><pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/api/v4/settings/remove_suspended_members</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>

</code></pre>
<p><code>DELETE /api/v4/settings/remove_suspended_members</code></p>
<h1 id='column-explanation'>Column Explanation</h1><h2 id='7dbb085c42'>数据库表解释</h2>
<ul>
<li><p>Flow: 管理员创建的流程</p>

<ul>
<li>Field: 发起人所需要填写的字段</li>
<li>Vertex &amp; Edge: 节点和边，可以构建出流程的策略图</li>
</ul></li>
<li><p>Journey: 用户发起的流程</p>

<ul>
<li>Assignment: 处理者收到的任务</li>
<li>Response: 处理者填写的数据</li>
<li>Moment: 一条流程所有的事件，发起、通过、拒绝、转交...</li>
</ul></li>
</ul>
<h2 id='41e10bfd0d'>字段解释</h2>
<table><thead>
<tr>
<th>Flow Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>流程名称</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Field Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>字段名称</td>
</tr>
<tr>
<td>description</td>
<td>字段描述</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Vertex Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>节点名称</td>
</tr>
<tr>
<td>type</td>
<td>节点描述</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Edge Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>from_vertex_id</td>
<td>入节点id</td>
</tr>
<tr>
<td>to_vertex_id</td>
<td>出节点id</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Journey Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>sn</td>
<td>流程编号</td>
</tr>
<tr>
<td>status</td>
<td>状态</td>
</tr>
<tr>
<td>current_vertex_id</td>
<td>当前节点id</td>
</tr>
<tr>
<td>reviewer_vertex_ids</td>
<td>已完成的节点ids</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Journey Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>vertex_id</td>
<td>节点id</td>
</tr>
<tr>
<td>status</td>
<td>状态</td>
</tr>
<tr>
<td>categroy</td>
<td><code>proposed</code>: 为发起人创建的; <code>processed</code>: 为每个处理人创建的; <code>cc</code>: 为抄送者创建的</td>
</tr>
<tr>
<td>operation_data</td>
<td>处理的相关数据</td>
</tr>
<tr>
<td>operation_data[comment]</td>
<td>处理意见</td>
</tr>
<tr>
<td>operation_data[esignature]</td>
<td>电子签名，base64编码的图片</td>
</tr>
<tr>
<td>operation_data[next_vertex_id]</td>
<td>下一节点id</td>
</tr>
<tr>
<td>operation_data[next_reviewer_ids]</td>
<td>指定下一节点处理人id</td>
</tr>
<tr>
<td>operation_data[duration_thresholds]</td>
<td>下一节点处理时间限制</td>
</tr>
<tr>
<td>operation_data[carbon_copy_user_ids]</td>
<td>抄送给其他用户id</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Moment Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>意义参考journey status</td>
</tr>
<tr>
<td>comment</td>
<td>处理意见</td>
</tr>
<tr>
<td>esignature</td>
<td>电子签名，base64编码的图片</td>
</tr>
<tr>
<td>vertex_id</td>
<td>处理节点id</td>
</tr>
<tr>
<td>user</td>
<td>发起人或处理人</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>User Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>姓名</td>
</tr>
<tr>
<td>identifier</td>
<td>识别码</td>
</tr>
<tr>
<td>headimgurl</td>
<td>头像</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Response Column</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>cached_values</td>
<td><code>json</code>数据</td>
</tr>
</tbody></table>
<h2 id='2574b30335'>流程状态解释</h2>
<ul>
<li>当流程发起时(Journey Create)，会为发起人创建一个proposed Assignment</li>
<li>当流程到达处理人节点是，会为每一个处理人创建一个processed Assignment</li>
<li>proposed Assignment和Journey的状态是同步变化的，eg: Journey为finished, proposed Assignment也为finished</li>
<li>processed Assignment状态对Journey影响

<ul>
<li>当所有节点都通过(approved)时，流程(Journey)变成finished</li>
<li>处理人拒绝(refused)到开始节点，流程(Journey)变成receding</li>
</ul></li>
</ul>

<table><thead>
<tr>
<th>处理人(processed) Assignment Status</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>processing</td>
<td>任务正在处理中</td>
</tr>
<tr>
<td>approved</td>
<td>通过</td>
</tr>
<tr>
<td>refused</td>
<td>拒绝, 可能拒绝到开始节点；可能拒绝到上一节点</td>
</tr>
<tr>
<td>transferred</td>
<td>转交</td>
</tr>
<tr>
<td>skipped</td>
<td>被其他人处理</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>发起人(proposed) Assignment Status</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>processing</td>
<td>流程正在处理中</td>
</tr>
<tr>
<td>cancelled</td>
<td>发起人撤销流程</td>
</tr>
<tr>
<td>receding</td>
<td>被处理人回退到开始节点</td>
</tr>
<tr>
<td>finished</td>
<td>所有节点通过，流程完成</td>
</tr>
<tr>
<td>aborted</td>
<td>管理员手动终止流程</td>
</tr>
<tr>
<td>suspended</td>
<td>流程异常，eg: 找不到下一节点；下一节点没有处理人...</td>
</tr>
</tbody></table>
<h2 id='response-cached_values'>Response cached_values 说明</h2>
<ul>
<li>展示建议使用text_value</li>
<li>附件的下载地址有权限限制，如果想获取附件真正的下载地址，通过附件<a href="https://github.com/GreenNerd/SLP-ChangeLog/wiki/%E9%99%84%E4%BB%B6api-v4">接口</a></li>
</ul>
<pre class="highlight plaintext"><code>一般字段
{
  `field_id`: {
    {
      value: [...],
      text_value: [...],
      exported_value: [...]
    }
  }
}
</code></pre><pre class="highlight plaintext"><code>明细`(Field::Detail)`字段
{
  `detail_id`: {
    group_ids: [...],
    child_ids: [...]
  }
}
</code></pre><pre class="highlight plaintext"><code>明细内的字段
{
  `child_id`: {
    grouped_ids: [...],
    grouped_values: [
      `group_id`: {
        group_id: `group_id`,
        value: [...],
        text_value: [...],
        exported_value: [...]
      }
    ]
  }
}
</code></pre><h1 id='tags'>Tags</h1><h2 id='61fbf3a18b'>查询空间下标签类型</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/tags</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
<span class="s">{</span>
<span class="s">  "type": "user"</span>
<span class="s">}</span>
<span class="s">or</span>
<span class="s">{</span>
<span class="s">  "type": "receipt"</span>
<span class="s">}</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "歌手",</span>
<span class="s">    "full_name": "歌手"</span>
<span class="s">  },</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "演员",</span>
<span class="s">    "full_name": "演员"</span>
<span class="s">  }</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/tags</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>标签类型</td>
<td></td>
</tr>
</tbody></table>
<h2 id='4ba44bc588'>查询成员标签下的成员</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/api/v4/tags/1/taggable_users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">your_authorization</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="s">[</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "第一个管理员",</span>
<span class="s">    "nickname": "",</span>
<span class="s">    "phone": "1111111111",</span>
<span class="s">    "identifier": "1111111111",</span>
<span class="s">    "qq": "123",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": "123",</span>
<span class="s">    "imported_alias": "第一个管理员",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [{</span>
<span class="s">      "id": 1,</span>
<span class="s">      "name": "b1",</span>
<span class="s">      "full_name": "bq-b1",</span>
<span class="s">      "color": "#e91e63",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 9</span>
<span class="s">    }, {</span>
<span class="s">      "id": 3,</span>
<span class="s">      "name": "a1",</span>
<span class="s">      "full_name": "a1",</span>
<span class="s">      "color": "#ff5722",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 4</span>
<span class="s">    }, {</span>
<span class="s">      "id": 8,</span>
<span class="s">      "name": "a2",</span>
<span class="s">      "full_name": "a2",</span>
<span class="s">      "color": "#673ab7",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 1</span>
<span class="s">    }</span>
<span class="s">    },</span>
<span class="s">  {</span>
<span class="s">    "id": 1,</span>
<span class="s">    "name": "第二个管理员",</span>
<span class="s">    "nickname": "",</span>
<span class="s">    "phone": "12222222222",</span>
<span class="s">    "identifier": "12222222222",</span>
<span class="s">    "qq": "123",</span>
<span class="s">    "headimgurl": "/non-digested-assets/avatars/default.png",</span>
<span class="s">    "openid": "123",</span>
<span class="s">    "imported_alias": "第一个管理员",</span>
<span class="s">    "from_wechat": false,</span>
<span class="s">    "tags": [{</span>
<span class="s">      "id": 1,</span>
<span class="s">      "name": "b1",</span>
<span class="s">      "full_name": "bq-b1",</span>
<span class="s">      "color": "#e91e63",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 9</span>
<span class="s">    }, {</span>
<span class="s">      "id": 3,</span>
<span class="s">      "name": "a1",</span>
<span class="s">      "full_name": "a1",</span>
<span class="s">      "color": "#ff5722",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 4</span>
<span class="s">    }, {</span>
<span class="s">      "id": 8,</span>
<span class="s">      "name": "a2",</span>
<span class="s">      "full_name": "a2",</span>
<span class="s">      "color": "#673ab7",</span>
<span class="s">      "tag_group_id": 1,</span>
<span class="s">      "taggings_count": 1</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">]</span>
</code></pre>
<p><code>GET /api/v4/tags/:id/taggable_users</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>标签id</td>
<td></td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>403</td>
<td>Unauthorized - 授权失败，参考上方的2种授权方式</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - 没有找到请求的资源</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable - 更新资源时，验证失败</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - 服务器有问题，请联系我们</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
